{"version":3,"sources":["uni-app:///main.js","webpack:///E:/github/guoyu/unimall-app/pages/category/category.vue?feff","webpack:///E:/github/guoyu/unimall-app/pages/category/category.vue?b9be","webpack:///E:/github/guoyu/unimall-app/pages/category/category.vue?2dd7","webpack:///E:/github/guoyu/unimall-app/pages/category/category.vue?138b","uni-app:///pages/category/category.vue","webpack:///E:/github/guoyu/unimall-app/pages/category/category.vue?89df","webpack:///E:/github/guoyu/unimall-app/pages/category/category.vue?de06"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,sG;AACAA,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oMAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAonB,CAAgB,knBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmExoB;AACA,MADA,kBACA;AACA;AACA,sBADA;AAEA,sBAFA,EAEA;AACA,6BAHA;AAIA,sBAJA;AAKA,yBALA,EAKA;AACA,oBANA;AAOA,mBAPA,EAOA;AACA,mBARA;AASA,eATA;AAUA,kBAVA;AAWA,eAXA;AAYA,kBAZA;;AAcA,0BAdA;AAeA,qBAfA;AAgBA,kBAhBA;AAiBA,eAjBA;AAkBA,eAlBA;AAmBA,eAnBA;AAoBA,iBApBA;AAqBA,8BArBA;AAsBA,oBAtBA;AAuBA,eAvBA;AAwBA,iBAxBA;AAyBA,qBAzBA;AA0BA,0BA1BA;AA2BA,wBA3BA;AA4BA,oBA5BA;;AA8BA,GAhCA;AAiCA;AACA,wBADA,EAjCA;;AAoCA;AACA,YADA,sBACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,oCADA,EACA,6BADA;AAEA;AACA,KATA,EApCA;;AA+CA,QA/CA,oBA+CA;AACA;AACA;AACA,GAlDA;AAmDA,QAnDA,kBAmDA,CAnDA,EAmDA;AACA,gCADA;AAEA;AACA,kBAHA,GAGA,KAHA;AAIA;AACA,6BADA;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA,mBAFA,EAEA,IAFA,CAEA;AACA;AACA;AACA,mBALA;AAMA,iBAdA,IAJA;;AAoBA,GAvEA;AAwEA;AACA;AACA,OAFA,eAEA,CAFA,EAEA;AACA;AACA;AACA,KALA;AAMA,eANA,uBAMA,IANA,EAMA,IANA,EAMA,IANA,EAMA,IANA,EAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAZA,CAYA;AACA;AACA;AACA,KArBA;AAsBA,cAtBA,sBAsBA,IAtBA,EAsBA;AACA;AACA;AACA,qBADA;;AAGA;AACA,sBADA;AAEA,uBAFA;AAGA;AACA;AACA;AACA,OANA,EAMA,IANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAvBA;;AAyBA;AACA;AACA;AACA,KAvDA;AAwDA;AACA,cAzDA,sBAyDA,OAzDA,EAyDA,QAzDA,EAyDA;AACA;AACA;AACA,KA5DA;AA6DA,UA7DA,oBA6DA;AACA;AACA;AACA,KAhEA;AAiEA,UAjEA,oBAiEA;AACA;AACA,KAnEA;AAoEA,cApEA,wBAoEA;AACA;AACA;AACA;AACA,KAxEA;AAyEA;AACA,cA1EA,sBA0EA,CA1EA,EA0EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,EAMA,GANA;AAOA,OAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5FA;AA6FA;AACA,WA9FA,mBA8FA,CA9FA,EA8FA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA,oCADA;AAEA,gBAFA;AAGA,YAHA,CAGA;AACA;AACA;AACA,SANA;AAOA;AACA,KA9GA;AA+GA,gBA/GA,wBA+GA,GA/GA,EA+GA;AACA;AACA;AACA,KAlHA;AAmHA;AACA,YApHA,sBAoHA;AACA,oBADA,GACA,MADA;AAEA;AACA;AACA;AACA;AACA;;AAEA,6BANA,GAMA,CANA,cAMA,qBANA;AAOA,uCAPA,GAOA,0BAPA;AAQA,6BARA,GAQA,CARA,cAQA,sBARA;AASA,uCATA,GASA,2BATA;AAUA,6BAVA,GAUA,CAVA,eAUA,sBAVA;AAWA,iCAXA,GAWA,cAXA;AAYA,sDAZA,UAYA,GAZA;AAaA,8CAbA,QAUA,GAVA,mCAQA,GARA,kCAMA,GANA;;;;;AAkBA;AACA;AACA;AACA;AACA,gDAtBA,8HAFA;;;AA2BA,KA/IA;AAgJA;AACA,UAjJA,kBAiJA,IAjJA,EAiJA;AACA;AACA;AACA;AACA;AACA,KAtJA;AAuJA,aAvJA,qBAuJA,GAvJA,EAuJA;AACA;AACA,mDADA;;AAGA,KA3JA;AA4JA,kBA5JA,0BA4JA,GA5JA,EA4JA;AACA;AACA,gBADA;;AAGA,KAhKA;;AAkKA;AACA,aAnKA,qBAmKA,MAnKA,EAmKA;;AAEA,2BAFA,GAEA,EAFA;AAGA;AACA;AACA;AACA,oCADA;AAEA,gCAFA;;AAIA;AACA;AACA;AACA;AACA,oCADA;AAEA,kDAFA;;AAIA,iBAhBA;AAiBA;AACA,sCADA;AAEA,6BAFA;AAGA,6BAHA;AAIA,6BAJA,EAjBA,SAiBA,GAjBA;;;AAwBA,8BAxBA;;AA0BA,KA7LA;;AA+LA;AACA,mBAhMA,2BAgMA,IAhMA,EAgMA;AACA;AACA;AACA;AACA,mDADA;;AAGA,KAtMA,EAxEA,E;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAAqoC,CAAgB,4jCAAG,EAAC,C;;;;;;;;;;;ACAzpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/category/category.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/category/category.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./category.vue?vue&type=template&id=682a9774&\"\nvar renderjs\nimport script from \"./category.vue?vue&type=script&lang=js&\"\nexport * from \"./category.vue?vue&type=script&lang=js&\"\nimport style0 from \"./category.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/category/category.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=template&id=682a9774&\"","var components\ntry {\n  components = {\n    neilModal: function() {\n      return import(\n        /* webpackChunkName: \"components/neil-modal/neil-modal\" */ \"@/components/neil-modal/neil-modal.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\r\n\t\t<!-- 小程序头部兼容 -->\r\n\t\t<!-- #ifdef MP -->\r\n\t\t<view class=\"info-box\">\r\n\t\t\t<view class=\"title\">{{merchantConfig.title}}</view>\r\n\t\t\t<view class=\"info\">距离您 {{distance}}</view>\r\n\t\t\t<view class=\"switch\" >\r\n\t\t\t\t<view class=\"switchNums\" :class=\"deliverType == 0 ? 'currentNum' : ''\" @click=\"switchChange(0)\">{{selectOpen[0]}}</view>\r\n\t\t\t\t<view class=\"switchNums\" :class=\"deliverType == 1 ? 'currentNum' : ''\" @click=\"switchChange(1)\">{{selectOpen[1]}}</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<input @click=\"navigateToPage('/pages/product/search')\" class=\"ser-input\" type=\"text\" value=\"搜索\" disabled />\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t\r\n\t\t<view class=\"container\">\r\n\t\t\t<scroll-view scroll-y class=\"left-aside\">\r\n\t\t\t\t<view v-for=\"item in flist\" :key=\"item.id\" class=\"f-item b-b\" :class=\"{active: item.id === currentId}\" @click=\"tabtap(item)\">\r\n\t\t\t\t\t{{item.title}}\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<scroll-view scroll-with-animation scroll-y class=\"right-aside\" :scroll-top=\"tabScrollTop\">\r\n\t\t\t\t<view v-for=\"item in slist\" :key=\"item.id\" class=\"s-list\" :id=\"'main-'+item.id\">\r\n\t\t\t\t\t<!-- <text class=\"s-item\" >{{item.title}}</text> -->\r\n\t\t\t\t\t<view class=\"t-list\" v-if=\"titem.parentId === item.id && titem.goods.length > 0\" v-for=\"titem in item.childrenList\" :key=\"titem.id\">\r\n\t\t\t\t\t\t<text class=\"s-item title\" >{{item.title}} > {{titem.title}}</text>\r\n\t\t\t\t\t\t<view class=\"t-item\" v-for=\"good in titem.goods\" :key=\"good.id\">\r\n\t\t\t\t\t\t\t<image class=\"img\" :src=\"good.img + '?x-oss-process=style/200px'\"></image>\r\n\t\t\t\t\t\t\t<text class=\"title\">{{good.title}}</text>\r\n\t\t\t\t\t\t\t<text class=\"price\">￥ {{good.originalPrice / 100}}</text>\r\n\t\t\t\t\t\t\t<view class=\"chooseBtn\" @click=\"chooseThis(good)\">选规格</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<neil-modal :show=\"modalShow\" @close=\"closeModal\" :show-cancel=\"false\" :show-confirm=\"false\">\r\n\t\t    <view class=\"product-detail\">\r\n\t\t        <view class=\"close\" @click=\"closeModal\">X</view>\r\n\t\t        <image class=\"img\" :src=\"goods.img\" mode=\"aspectFit\"></image>\r\n\t\t        <view class=\"info\">{{goods.title}}</view>\r\n\t\t\t\t<view class=\"box\">\r\n\t\t\t\t\t<view class=\"price\">￥ {{goods.originalPrice / 100}}</view>\r\n\t\t\t\t\t<view class=\"sub\" @click=\"numSub\">-</view>\r\n\t\t\t\t\t<view class=\"num\">{{goodsNum}}</view>\r\n\t\t\t\t\t<view class=\"add\" @click=\"numAdd\">+</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"attr-list\">\r\n\t\t\t\t\t\t<!-- <text>规格</text> -->\r\n\t\t\t\t\t\t<view class=\"item-list\">\r\n\t\t\t\t\t\t\t<text v-for=\"(skuItem, skuIndex) in goods.skuList\" :key=\"skuIndex\" class=\"tit\" :class=\"{selected: skuIndex === selectedSkuIndex}\"\r\n\t\t\t\t\t\t\t @click=\"selectSpec(skuItem, skuIndex)\">\r\n\t\t\t\t\t\t\t\t{{skuItem.title}}\r\n\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"btn\" @click=\"addCart\">加入购物袋</view>\r\n\t\t\t\t</view>\r\n\t\t    </view>\r\n\t\t</neil-modal>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport neilModal from '@/components/neil-modal/neil-modal.vue';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmodalShow: false,\r\n\t\t\t\tcateMaskState: 0, //分类面板展开状态\r\n\t\t\t\theaderPosition: \"fixed\",\r\n\t\t\t\theaderTop: \"0px\",\r\n\t\t\t\tloadingType: 'more', //加载更多状态\r\n\t\t\t\tfilterIndex: 0,\r\n\t\t\t\tpriceOrder: 0, //1 价格从低到高 2价格从高到低\r\n\t\t\t\tgoodsList: [],\n\t\t\t\tcateId: 0,\n\t\t\t\tkeywords: '',\n\t\t\t\tpageNo: 1,\n\t\t\t\tisVip: false,\r\n\t\t\t\t\r\n\t\t\t\tsizeCalcState: false,\r\n\t\t\t\ttabScrollTop: 0,\r\n\t\t\t\tcurrentId: 1,\r\n\t\t\t\tflist: [],\r\n\t\t\t\tslist: [],\r\n\t\t\t\ttlist: [],\n\t\t\t\trawData: [],\n\t\t\t\tselectOpen:[\"自取\",\"外卖\"],\n\t\t\t\tdeliverType: 1,\r\n\t\t\t\tgoods: {},\r\n\t\t\t\tgoodsNum: 1,\r\n\t\t\t\tselectedSku: {},\r\n\t\t\t\tselectedSkuIndex: -1,\r\n\t\t\t\tmerchantConfig: {},\r\n\t\t\t\tuserConfig: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tneilModal\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tdistance() {\r\n\t\t\t\t// 计算用户与商家的距离\r\n\t\t\t\tif (!(this.userConfig.longitude && this.merchantConfig.longitude)) {\r\n\t\t\t\t\treturn 0\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.getDistance(this.userConfig.latitude, this.userConfig.longitude,\r\n\t\t\t\t\t\t\t\t\t\t\tthis.merchantConfig.latitude, this.merchantConfig.longitude)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tlet deliverType = uni.getStorageSync('deliverType');\r\n\t\t\tthis.deliverType = deliverType || 0\r\n\t\t},\r\n\t\tasync onLoad(e){\r\n\t\t\tawait this.loadData()\r\n\t\t\tconsole.log('onload', e)\r\n\t\t\tconst that = this\r\n\t\t\tuni.getLocation({\n\t\t\t\ttype: 'wgs84',\n\t\t\t\tsuccess: function (res) {\n\t\t\t\t\tconsole.log('当前位置的经度：' + res.longitude);\n\t\t\t\t\tconsole.log('当前位置的纬度：' + res.latitude);\r\n\t\t\t\t\tthat.userConfig = res\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.$api.request('config', 'getMerchantConfig', {}, failres => {\r\n\t\t\t\t\t\tthat.$api.msg(failres.errmsg)\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconsole.log('商户信息', res.data)\r\n\t\t\t\t\t\tthat.merchantConfig = res.data\r\n\t\t\t\t\t})\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 计算距离函数\r\n\t\t\tRad(d) { \r\n\t\t\t\t//根据经纬度判断距离\r\n\t\t\t\treturn d * Math.PI / 180.0;\r\n\t\t\t},\r\n\t\t\t getDistance(lat1, lng1, lat2, lng2) {\r\n\t\t\t\t// lat1用户的纬度\r\n\t\t\t\t// lng1用户的经度\r\n\t\t\t\t// lat2商家的纬度\r\n\t\t\t\t// lng2商家的经度\r\n\t\t\t\tvar radLat1 = this.Rad(lat1);\r\n\t\t\t\tvar radLat2 = this.Rad(lat2);\r\n\t\t\t\tvar a = radLat1 - radLat2;\r\n\t\t\t\tvar b = this.Rad(lng1) - this.Rad(lng2);\r\n\t\t\t\tvar s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)));\r\n\t\t\t\ts = s * 6378.137;\r\n\t\t\t\ts = Math.round(s * 10000) / 10000;\r\n\t\t\t\ts = s.toFixed(1) + 'km' //保留两位小数\r\n\t\t\t\tconsole.log('经纬度计算的距离:' + s)\r\n\t\t\t\treturn s\r\n\t\t\t},\r\n\t\t\tchooseThis(good) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在加载'\r\n\t\t\t\t})\r\n\t\t\t\tthat.$api.request('goods', 'getGoods', {\r\n\t\t\t\t\tspuId: good.id,\r\n\t\t\t\t\tgroupShopId: ''\r\n\t\t\t\t}, failres => {\r\n\t\t\t\t\tthat.$api.msg(failres.errmsg)\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthat.goods = res.data\r\n\t\t\t\t\tif (that.goods.groupShop) {\r\n\t\t\t\t\t\t//若存在团购信息，将价格更新到团购价格\r\n\t\t\t\t\t\tthat.goods.price = that.goods.groupShop.minPrice\r\n\t\t\t\t\t\tthat.goods.vipPrice = that.goods.groupShop.minPrice\r\n\t\t\t\t\t\t//更新各个SKU的价格\r\n\t\t\t\t\t\tfor (let i = 0; i < that.goods.skuList.length; i++) {\r\n\t\t\t\t\t\t\tfor (let j = 0; j < that.goods.groupShop.groupShopSkuList.length; j++) {\r\n\t\t\t\t\t\t\t\tif (that.goods.skuList[i].id === that.goods.groupShop.groupShopSkuList[j].skuId) {\r\n\t\t\t\t\t\t\t\t\tthat.goods.skuList[i].price = that.goods.groupShop.groupShopSkuList[j].skuGroupShopPrice\r\n\t\t\t\t\t\t\t\t\tthat.goods.skuList[i].vipPrice = that.goods.groupShop.groupShopSkuList[j].skuGroupShopPrice\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tthis.goods = good\r\n\t\t\t\tthis.goodsNum = 1\r\n\t\t\t\tthis.modalShow = true\r\n\t\t\t},\r\n\t\t\t//选择规格\r\n\t\t\tselectSpec(skuItem, skuIndex) {\r\n\t\t\t\tthis.selectedSku = skuItem\r\n\t\t\t\tthis.selectedSkuIndex = skuIndex\r\n\t\t\t},\r\n\t\t\tnumSub() {\r\n\t\t\t\tif (this.goodsNum > 1)\r\n\t\t\t\t\tthis.goodsNum --\r\n\t\t\t},\r\n\t\t\tnumAdd() {\r\n\t\t\t\tthis.goodsNum ++\r\n\t\t\t},\r\n\t\t\tcloseModal() {\r\n\t\t\t\tthis.modalShow = false\r\n\t\t\t\tthis.selectedSku = {}\r\n\t\t\t\tthis.selectedSkuIndex = -1\r\n\t\t\t},\r\n\t\t\t//规格弹窗开关\r\n\t\t\ttoggleSpec(e) {\r\n\t\t\t\tif (this.specClass === 'show') {\r\n\t\t\t\t\tthis.specClass = 'hide';\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.specClass = 'none';\r\n\t\t\t\t\t\tif (this.toggleCallback) {\r\n\t\t\t\t\t\t\tthis.toggleCallback()\r\n\t\t\t\t\t\t\tthis.toggleCallback = undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 150);\r\n\t\t\t\t} else if (this.specClass === 'none') {\r\n\t\t\t\t\tthis.specClass = 'show';\r\n\t\t\t\t\tif (!this.selectedSku.title) {\r\n\t\t\t\t\t\tthis.selectedSku = this.goods.skuList[0]\r\n\t\t\t\t\t\tthis.selectedSkuIndex = 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//加入购物车\r\n\t\t\taddCart(e) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tif (!that.selectedSku.id) {\r\n\t\t\t\t\tthat.specClass = 'none'\r\n\t\t\t\t\tthat.toggleSpec()\r\n\t\t\t\t\tthat.toggleCallback = that.addCart\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//添加到购物车\r\n\t\t\t\t\tthat.$api.request('cart', 'addCartItem', {\r\n\t\t\t\t\t\tskuId: that.selectedSku.id,\r\n\t\t\t\t\t\tnum: 1\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthat.$api.msg('添加购物车成功')\r\n\t\t\t\t\t\tthat.closeModal()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tswitchChange(tab) {\r\n\t\t\t\tconsole.log(tab)\r\n\t\t\t\tthis.deliverType = tab\r\n\t\t\t},\r\n\t\t\t// 加载分类\r\n\t\t\tasync loadData(){\n\t\t\t\tconst that = this\r\n\t\t\t\tthis.$api.request('category', 'categoryList').then(async res => {\n\t\t\t\t\tthat.rawData = res.data\n\t\t\t\t\tthat.flist = res.data\n\t\t\t\t\tthat.currentId = res.data[0].id\n\t\t\t\t\tthat.slist = res.data[0].childrenList\r\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 0; i < that.flist.length; i++) {\r\n\t\t\t\t\t\tlet curr_i_data = that.flist[i].childrenList\r\n\t\t\t\t\t\tfor (let j = 0; j < curr_i_data.length; j++) {\r\n\t\t\t\t\t\t\tlet curr_j_data = curr_i_data[j].childrenList\r\n\t\t\t\t\t\t\tfor (let k = 0; k < curr_j_data.length; k++) {\r\n\t\t\t\t\t\t\t\tlet cate3 = curr_j_data[k]\r\n\t\t\t\t\t\t\t\tres = await that.loadGoods(cate3.id)\r\n\t\t\t\t\t\t\t\tcate3.goods = res\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('flist 2')\r\n\t\t\t\t\tconsole.log(that.flist)\n\t\t\t\t\tconsole.log(that.flist[0].childrenList[0].childrenList[0])\r\n\t\t\t\t\tthat.slist = that.flist[0].childrenList\r\n\t\t\t\t\tthat.$forceUpdate()\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//一级分类点击\r\n\t\t\ttabtap(item){\r\n\t\t\t\tthis.currentId = item.id;\r\n\t\t\t\tthis.currentId = item.id\n\t\t\t\tthis.slist = item.childrenList\r\n\t\t\t\tthis.tabScrollTop = this.tabScrollTop === 0 ? 1 : 0\r\n\t\t\t},\r\n\t\t\tnavToList(tid){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/product/list?tid=${tid}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavigateToPage(url) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: url\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//加载商品 ，带下拉刷新和上滑加载\r\n\t\t\tasync loadGoods(cateId) {\r\n\t\t\r\n\t\t\t\tlet orderByInfo = {}\r\n\t\t\t\tif (this.filterIndex === 0) {\r\n\t\t\t\t\t//销量排序\r\n\t\t\t\t\torderByInfo = {\r\n\t\t\t\t\t\torderBy: 'sales',\r\n\t\t\t\t\t\tisAsc: false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.filterIndex === 1) {\r\n\t\t\t\t\t//价格排序 需要从新获取Page\r\n\t\t\t\t\torderByInfo = {\r\n\t\t\t\t\t\torderBy: 'price',\r\n\t\t\t\t\t\tisAsc: this.priceOrder === 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.$api.request('goods', 'getGoodsPage', {\r\n\t\t\t\t\tcategoryId: cateId,\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tpageNo : 1,\r\n\t\t\t\t\t...orderByInfo\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\treturn res.data.items\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//详情\r\n\t\t\tnavToDetailPage(item) {\r\n\t\t\t\t//测试数据没有写id，用title代替\r\n\t\t\t\tlet id = item.id;\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: `/pages/product/detail?id=${id}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\t/* #ifdef MP */\r\n\t.info-box{\r\n\t\t/* position:absolute; */\r\n\t\t/* left: 0; */\r\n\t\ttop: 30upx;\r\n\t\twidth: 100%;\r\n\t\tpadding: 0;\r\n\t\tbackground-color: white;\r\n\t\t\r\n\t\t.title {\r\n\t\t\tfont-size: 50upx;\r\n\t\t\tline-height: 80upx;\r\n\t\t\theight: 80upx;\r\n\t\t\tmargin-top: 40upx;\r\n\t\t\tmargin-left: 80upx;\r\n\t\t}\r\n\t\t\r\n\t\t.info {\r\n\t\t\tfont-size: $font-sm;\r\n\t\t\tcolor: $font-color-light;\r\n\t\t\tmargin: 20upx 0;\r\n\t\t\tmargin-left: 80upx;\r\n\t\t}\r\n\t\t\r\n\t\t.switch {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 40upx;\r\n\t\t\tright: 30upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: flex-end;\r\n\t\t\theight: 54rpx;\r\n\t\t\twidth: 180upx;\r\n\t\t\tborder-radius: 54rpx;\r\n\t\t\tbackground: #c1c1c1;\r\n\t\t}\r\n\t\t.switchNums {\r\n\t\t  width: 112rpx;\r\n\t\t  height: 54rpx;\r\n\t\t  line-height: 54rpx;\r\n\t\t  border-radius: 54rpx;\r\n\t\t  text-align: center;\r\n\t\t  color: white;\r\n\t\t  font-size: 28rpx;\r\n\t\t  font-weight: bold;\r\n\t\t  &.currentNum {\r\n\t\t    background: #6a74c9;\r\n\t\t    color: #ffffff;\r\n\t\t  }\r\n\t\t}\r\n\t\t.ser-input{\r\n\t\t\tflex:1;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 64upx;\r\n\t\t\tline-height: 56upx;\r\n\t\t\ttext-align: left;\r\n\t\t\tpadding-left: 30upx;\r\n\t\t\tfont-size: 28upx;\r\n\t\t\tcolor:$font-color-base;\r\n\t\t\tbackground: rgba(255,255,255,.6);\r\n\t\t\tborder: 1px solid grey;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\t}\r\n\t/* #endif */\r\n\r\n\tpage,\r\n\t.content {\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f8f8f8;\r\n\t}\r\n\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex-flow: column;\r\n\t}\r\n\t\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex-flow: row;\r\n\t}\r\n\t.left-aside {\r\n\t\tflex-shrink: 0;\r\n\t\twidth: 200upx;\r\n\t\theight: 100%;\r\n\t\tbackground-color: #f8f8f8;\r\n\t}\r\n\t.f-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 100%;\r\n\t\theight: 100upx;\r\n\t\tfont-size: 28upx;\r\n\t\tcolor: $font-color-base;\r\n\t\tposition: relative;\r\n\t\t&.active{\r\n\t\t\tcolor: $base-color;\r\n\t\t\tbackground: white;\r\n\t\t\t&:before{\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 0;\r\n\t\t\t\ttop: 50%;\r\n\t\t\t\ttransform: translateY(-50%);\r\n\t\t\t\theight: 100upx;\r\n\t\t\t\twidth: 16upx;\r\n\t\t\t\tbackground-color: $base-color;\r\n\t\t\t\t/* border-radius: 0 4px 4px 0; */\r\n\t\t\t\topacity: .8;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.right-aside{\r\n\t\tflex: 1;\r\n\t\toverflow: hidden;\r\n\t\tpadding-left: 20upx;\r\n\t\twidth: 550upx;\r\n\t\tbackground-color: white;\r\n\t\tmin-height: 1000upx;\r\n\t\tpadding-bottom: 40upx;\r\n\t}\r\n\t.s-item{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\theight: 70upx;\r\n\t\tpadding-top: 8upx;\r\n\t\tfont-size: 28upx;\r\n\t\tcolor: $font-color-dark;\r\n\t\twidth: 100%;\r\n\t\tdisplay: inline-block;\r\n\t\tclear: both;\r\n\t}\r\n\t.t-list{\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\twidth: 100%;\r\n\t\tbackground: #fff;\r\n\t\tpadding-top: 12upx;\r\n\t\t&:after{\r\n\t\t\tcontent: '';\r\n\t\t\tflex: 99;\r\n\t\t\theight: 0;\r\n\t\t}\r\n\t}\r\n\t.t-item{\r\n\t\tflex-shrink: 0;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tflex-direction: column;\r\n\t\twidth: 500upx;\r\n\t\tfont-size: 26upx;\r\n\t\tcolor: #666;\r\n\t\tpadding-bottom: 20upx;\r\n\t\tposition: relative;\r\n\t\theight: 200upx;\r\n\t\t\r\n\t\t.img{\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 20upx;\r\n\t\t\twidth: 140upx;\r\n\t\t\theight: 140upx;\r\n\t\t}\r\n\t\t.title {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 20upx;\r\n\t\t\twidth: 300upx;\r\n\t\t}\r\n\t\t.price {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 30upx;\r\n\t\t\tbottom: 50upx;\r\n\t\t}\r\n\t\t.chooseBtn {\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 0upx;\r\n\t\t\tbottom: 0;\r\n\t\t\tpadding: 5upx 20upx;\r\n\t\t\tbackground-color: #28D7FE;\r\n\t\t\tborder-radius: 20upx;\r\n\t\t\tcolor: white;\r\n\t\t}\r\n\t}\r\n\t.product-detail {\r\n\t\tposition: relative;\r\n\t\ttext-align: center;\r\n\t\t\r\n\t\t.close {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 20upx;\r\n\t\t\tright: 20upx;\r\n\t\t\twidth: 60upx;\r\n\t\t\theight: 60upx;\r\n\t\t\tborder: 1px solid $font-color-light;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\ttext-align: center;\r\n\t\t\tline-height: 60upx;\r\n\t\t\tcolor: $font-color-light;\r\n\t\t}\r\n\t\t\r\n\t\t.img {\r\n\t\t\theight: 500upx;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\t\t\r\n\t\t.info {\r\n\t\t\tmargin-left: 50upx;\r\n\t\t\ttext-align: left;\r\n\t\t}\r\n\t\t\r\n\t\t.box {\r\n\t\t\tborder-top: 2upx solid $font-color-light;\r\n\t\t\tmargin: 0 20upx;\r\n\t\t\tposition: relative;\r\n\t\t\tmargin-top: 80upx;\r\n\t\t\t\r\n\t\t\t.price {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tleft: 20upx;\r\n\t\t\t\ttop: 20upx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.sub {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 100upx;\r\n\t\t\t\ttop: 20upx;\r\n\t\t\t\tborder: 1upx solid $font-color-light;\r\n\t\t\t\tcolor: $font-color-light;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\theight: 40upx;\r\n\t\t\t\twidth: 40upx;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tline-height: 30upx;\r\n\t\t\t\tfont-size: 40upx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.num {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 60upx;\r\n\t\t\t\ttop: 20upx;\r\n\t\t\t\tcolor: $font-color-light;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\theight: 40upx;\r\n\t\t\t\twidth: 40upx;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.add {\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tright: 20upx;\r\n\t\t\t\ttop: 20upx;\r\n\t\t\t\tcolor: $font-color-light;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\theight: 40upx;\r\n\t\t\t\twidth: 40upx;\r\n\t\t\t\tborder-radius: 50%;\r\n\t\t\t\tline-height: 30upx;\r\n\t\t\t\tfont-size: 40upx;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tbackground-color: #28D7FE;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.btn {\r\n\t\t\t\theight: 80upx;\r\n\t\t\t\tbackground-color: #28D7FE;\r\n\t\t\t\twidth: 60%;\r\n\t\t\t\tmargin: 0 auto;\r\n\t\t\t\tmargin-top: 80upx;\r\n\t\t\t\tmargin-bottom: 40upx;\r\n\t\t\t\tline-height: 80upx;\r\n\t\t\t\tborder-radius: 40upx;\r\n\t\t\t\tcolor: white;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t.attr-list {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tfont-size: $font-base + 2upx;\r\n\t\t\t\tcolor: $font-color-base;\r\n\t\t\t\tpadding-top: 30upx;\r\n\t\t\t\tpadding-left: 10upx;\r\n\t\t\t\tmargin: 40upx auto;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.item-list {\r\n\t\t\t\tpadding: 20upx 0 0;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-wrap: wrap;\r\n\t\t\t\r\n\t\t\t\ttext {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tbackground: #eee;\r\n\t\t\t\t\tmargin-right: 20upx;\r\n\t\t\t\t\tmargin-bottom: 20upx;\r\n\t\t\t\t\tborder-radius: 100upx;\r\n\t\t\t\t\tmin-width: 60upx;\r\n\t\t\t\t\theight: 60upx;\r\n\t\t\t\t\tpadding: 0 20upx;\r\n\t\t\t\t\tfont-size: $font-base;\r\n\t\t\t\t\tcolor: $font-color-dark;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t.selected {\r\n\t\t\t\t\tbackground: #fbebee;\r\n\t\t\t\t\tcolor: $uni-color-primary;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./category.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1634972843787\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}